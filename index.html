<!DOCTYPE html>
<html>
<head>
	<title>Election Information</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<meta charset="utf-8">
	<link rel="stylesheet" href="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css">
	<link rel="stylesheet" href="css/styles.css">
	
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="js/jquery.mobile.router.min.js" type="text/javascript"></script>
	<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body>

	<div data-role="page" id="info">
		<div data-role="content"></div>
		<div data-role="footer" data-position="fixed" data-theme="b" data-id="foot"></div>
	</div>

	<div data-role="page" id="pollingplace">
		<div data-role="content"></div>
		<div data-role="footer" data-position="fixed" data-theme="b" data-id="foot"></div>
	</div>

	<div data-role="page" id="candidates">
		<div data-role="content"></div>
		<div data-role="footer" data-position="fixed" data-theme="b" data-id="foot"></div>
	</div>
	
	<script type="text/template" id="template-footer">
		<div data-role="navbar">
			<ul>
				<li><a href="#info<%= queryString %>" data-icon="info"<% if(currentPage == "info") { %> class="ui-btn-active ui-state-persist"<% } %>>Info</a></li>
				<li><a href="#pollingplace<%= currentPage != "pollingplace" ? queryString : "" %>" data-icon="home"<% if(currentPage == "pollingplace") { %> class="ui-btn-active ui-state-persist"<% } %>>Where to Vote</a></li>
				<li><a href="#candidates<%= currentPage != "candidates" ? queryString : ""  %>" data-icon="star"<% if(currentPage == "candidates") { %> class="ui-btn-active ui-state-persist"<% } %>>Candidates</a></li>
			</ul>
		</div>
	</script>
	
	<script type="text/template" id="template-info">
		<h2>Election Info</h2>
		<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vehicula tempor urna, venenatis euismod enim euismod sed.</p>
		<p>Vote on <strong>Tuesday</strong> 11/6 from <strong>7am - 8pm</strong></p>
		
		<div data-role="collapsible-set">
			<div data-role="collapsible">
				<h3>Voter ID</h3>
				Nunc mi leo, dapibus a vehicula non, consectetur eget nisl. Vestibulum ligula eros, dictum molestie feugiat eu, porta quis mauris. Sed varius quam vel nisi luctus commodo.
			</div>
			<div data-role="collapsible">
				<h3>Another Section</h3>
				Proin luctus sodales tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis blandit egestas ullamcorper.
			</div>
			<div data-role="collapsible">
				<h3>More Information</h3>
				For more information on the election, contact the Office of City Commissioner Stephanie Singer at 215-686-3940.
			</div>
		</div>
	</script>
	
	<script type="text/template" id="template-search">
		<p>Enter the address where you are registered to vote</p>
		<form action="<%= action %>">
			<label for="address" class="ui-hidden-accessible">Address</label>
			<input type="text" name="address" placeholder="Address">
			<button type="submit" data-theme="b">Search</button>
		</form>
	</script>
	
	<script type="text/template" id="template-pollingplace">
		<h2>Where to Vote</h2>
		
		<p>Note: Polling places can change due to emergencies. For confirmation, call 215-686-3940</p>
		
		Your address:<br>
		<%= userAddress %><br><br>
		
		Vote at:<br>
		<a href="<%= mapUrl %>"><%= pollingplace.POLLING_PL %><br>
		<%= pollingplace.ADDRESS %></a><br><br>
		
		<a href="<%= mapUrl %>"><img src="<%= staticMap %>"></a>
		
		<a href="#pollingplace" data-role="button" data-icon="arrow-l">Change Address</a>
	</script>
	
	<script type="text/template" id="template-candidates">
		<h2>Candidates</h2>
		Your Address:<br>
		<%= normalizedInput.line1 %><br><br>
		
		<div data-role="collapsible-set">
			<% for(i in contests) { %>
				<div data-role="collapsible">
					<h3><%= contests[i].office %></h3>
						<% for(j in contests[i].candidates) { %>
							<ul>
								<li><b><%= contests[i].candidates[j].name %></b> (<%= contests[i].candidates[j].party %> party)</li>
								<ul>
									<% if(contests[i].candidates[j].candidateUrl) { %>
										<li>Website: <a href="<%= contests[i].candidates[j].candidateUrl %>"><%= contests[i].candidates[j].candidateUrl %></a></li>
									<% } %>
									<% if(contests[i].candidates[j].phone) { %>
										<li>Phone: <%= contests[i].candidates[j].phone %></li>
									<% } %>
									<% if(contests[i].candidates[j].email) { %>
										<li>Email: <a href="mailto:<%= contests[i].candidates[j].email %>"><%= contests[i].candidates[j].email %></a></li>
									<% } %>
									<li>Social Media: 
										<% for(k in contests[i].candidates[j].channels) { %>
											<a href="<%= contests[i].candidates[j].channels[k].id %>"><%= contests[i].candidates[j].channels[k].type %></a>
									<% } %></li>
								</ul>
							</ul>
						<% } %>
				</div>
			<% } %>
		</div>		
		<a href="#pollingplace" data-role="button" data-icon="arrow-l">Change Address</a>
	</script>
	
	<script type="text/template" id="template-error">
		<h2>Error</h2>
		<%= msg %><br>		
		<% if(xhr && xhr.status !== undefined && xhr.statusText !== undefined) { %>
			<small>(Error Code: <%= xhr.status %> <%= xhr.statusText %>)</small><br><br>
		<% } %>
		
		Election Information:<br>
		215-686-3940<br><br>
		
		<a href="#" data-role="button" data-rel="back" data-icon="arrow-l">Back</a>
	</script>

	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
	<script src="js/main.js" type="text/javascript"></script><!-- No need to load this before the page is rendered -->
	<script src="js/api.js" type="text/javascript"></script>
</body>
</html>